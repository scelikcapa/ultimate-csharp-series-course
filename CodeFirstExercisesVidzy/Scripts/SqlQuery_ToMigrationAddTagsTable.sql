
-- this SQL Script is created with this code: Update-Database -Script -SourceMigration:0


DECLARE @CurrentMigration [nvarchar](max)

IF object_id('[dbo].[__MigrationHistory]') IS NOT NULL
    SELECT @CurrentMigration =
        (SELECT TOP (1) 
        [Project1].[MigrationId] AS [MigrationId]
        FROM ( SELECT 
        [Extent1].[MigrationId] AS [MigrationId]
        FROM [dbo].[__MigrationHistory] AS [Extent1]
        WHERE [Extent1].[ContextKey] = N'CodeFirstExercisesVidzy.Migrations.Configuration'
        )  AS [Project1]
        ORDER BY [Project1].[MigrationId] DESC)

IF @CurrentMigration IS NULL
    SET @CurrentMigration = '0'

IF @CurrentMigration < '202202101123089_InitialModel'
BEGIN
    CREATE TABLE [dbo].[Genres] (
        [Id] [tinyint] NOT NULL,
        [Name] [nvarchar](max),
        CONSTRAINT [PK_dbo.Genres] PRIMARY KEY ([Id])
    )
    CREATE TABLE [dbo].[Videos] (
        [Id] [int] NOT NULL IDENTITY,
        [Name] [nvarchar](max),
        [ReleaseDate] [datetime] NOT NULL,
        CONSTRAINT [PK_dbo.Videos] PRIMARY KEY ([Id])
    )
    CREATE TABLE [dbo].[VideoGenres] (
        [Video_Id] [int] NOT NULL,
        [Genre_Id] [tinyint] NOT NULL,
        CONSTRAINT [PK_dbo.VideoGenres] PRIMARY KEY ([Video_Id], [Genre_Id])
    )
    CREATE INDEX [IX_Video_Id] ON [dbo].[VideoGenres]([Video_Id])
    CREATE INDEX [IX_Genre_Id] ON [dbo].[VideoGenres]([Genre_Id])
    ALTER TABLE [dbo].[VideoGenres] ADD CONSTRAINT [FK_dbo.VideoGenres_dbo.Videos_Video_Id] FOREIGN KEY ([Video_Id]) REFERENCES [dbo].[Videos] ([Id]) ON DELETE CASCADE
    ALTER TABLE [dbo].[VideoGenres] ADD CONSTRAINT [FK_dbo.VideoGenres_dbo.Genres_Genre_Id] FOREIGN KEY ([Genre_Id]) REFERENCES [dbo].[Genres] ([Id]) ON DELETE CASCADE
    CREATE TABLE [dbo].[__MigrationHistory] (
        [MigrationId] [nvarchar](150) NOT NULL,
        [ContextKey] [nvarchar](300) NOT NULL,
        [Model] [varbinary](max) NOT NULL,
        [ProductVersion] [nvarchar](32) NOT NULL,
        CONSTRAINT [PK_dbo.__MigrationHistory] PRIMARY KEY ([MigrationId], [ContextKey])
    )
    INSERT [dbo].[__MigrationHistory]([MigrationId], [ContextKey], [Model], [ProductVersion])
    VALUES (N'202202101123089_InitialModel', N'CodeFirstExercisesVidzy.Migrations.Configuration',  0x1F8B0800000000000400DD59DB6EE336107D2FD07F10F4D416592B9797D6B07791759222E8260EE224E85B404B63872845A92415D85BF4CBFAD04FEA2F74A8BB48C996DDC0DB1601029B9C19CEE5702EF45F7FFC39FAB00A99F30A42D2888FDD93C1B1EB00F7A380F2E5D84DD4E2DDF7EE87F75F7F35BA0CC295F354D09D693AE4E472ECBE28150F3D4FFA2F10123908A92F22192DD4C08F428F0491777A7CFC837772E2018A705196E38CEE13AE6808E917FC3A89B80FB14A08BB890260325FC79D592AD5B92521C898F83076274871458554972B103E95209F68F079ED3AE78C125467066CE13A84F3481185CA0E1F25CC9488F87216E302610FEB18906E419884DC886145DED79EE3536D8F573116A2FC44AA28DC51E0C959EE20CF64DFCBCD6EE94074E125BA5AADB5D5A91BC7EE8FC0055A6E9E349C30A1A93A5D3C48198F9C8EEDA3121E8822FD87940953898031874409C28E9CBB64CEA8FF13AC1FA25F808F79C2585D57D416F71A0BB87427A218845ADFC322B7E03A701DAFC9E7998C255B8D2733EFE35AA1F9B7783699332891E06D64D7FF0B010827BC1EAE7343569F802FD5CBD8C58FAE73455710142BB9D4474EF136219312897DC82D79A5CBD4FBC671E85188A4EBDC034BB7E50B8D336C0FD2ADE73416487025A2F03E62054BBEFEFC40C412142A1CB56CCEA244F8863223AFC2C946F4A492F6414FCAF8DF47CF355767A72DF0A9B962A62201E86B10444170479402C1B50C489DF965A0661C82C00222E182A8F22CFDF981863DEE46276C0B54EE0BDB0299ADB02D30DD07B6E752463E4D75A8E3B638BF69CE250F9C4DCA6491288DC0682032698C58C493C7EE77967F3A049697B21298E7E28D02475ECD1AFB6E62F1548422D82A433FA78BB0522DF714CB617E55658E1453772D7406CA0869E5E7A6EA96E94DF6229159ECB92B0DF69AA5868C123A3592366899F77F4B704B7D2B55BD9E228A70D644143A9AE9A569560B7ECB2056AD8F97F53E458FE4753449A31B12C798236A4D53BEE2CCF28EE9DD6CF72E22CC6478BE6C69264A6DCB9330E3912518BBB55A80B985CC894E259320B4C81A90EDC0537154039576A40A9415E4FA73C6B2B1AB3125555EBC42C3424CDCA98D60C6DAE64B9B56C28868A92093882521EFAA429BB8B39A50E7CF566C0923CF50DCF4916739C900ABE9F25E01C92FCF5B0424CB0CBB07A483EF4B07A44B42A302D70535360E1FE066AE6A897299897B86B2A46F0D58EB35D229B7AD2336B2B7ED9B5E91CE44B5C55BFBA63C78479DF272B0A74EA9901D7532EB8A1D4EABBC98242598CA32639493519EDA7718CC8B5C9F91B80EEAFE8A8EC23C3F5B4B05E140130C66BFB209A308DF8AE08670BA00A9B2F6DEC5B1F8D418EBFF3D23B62765C0FACCD9071F5014E56BAADDFA0F265CFE4A84FF42C43721597D5B97648F163B0E8E077747EA8AAD13D9617CD56B0C0BF0B3DA3E86EDE6F7BDB1B82157DAC45D496C7BBCAA636A51B366976B1EC06AECFE96320D9DEB9F9F0BBE23672A30830C9D63E7F79DA359A96DDCA01E0A14BC3B28B0DFCCDA5AF3CCD164FBB07A6295DA29BF40102A70CEFD2C994E88F449607B4DD7A18DA7E713A1A9429F1957BF09C30284BE8F8461B9924A60C1B27A9B3B41B94F63C21A56DB35B74F16D12695F2CC9D0B8881EBF4601BD8E7B44D2D4629DA70EF360774BE036C014E5B63520B9D1DB5D680FDCF80D33F948705CEA63EF0CD81D3FE80640FED3D5E88BA1F88B23610EBDA5CA7A72C2B76BC93B43E1E75BF1DB5496E7FC46997DCA5787DB3F38C0E13B63E60952F4F9BDFB13A461C3BE15B03F0D6F7AB86D9E620D6FFE9AA97B1C51BD91663DB67273B4959CF2F87327687773A7B60C21B5AFBBD133384A4CB4A84FEF59383DFB89B25CD355F44459230342A488C66E60614C116929C0B4517C457B8ED8394E9AF084F8425487219CE21B8E6D344C5894293219CB3C6AF123AD56C3A3F7D8C6CEA3C9AC6E983FF5B98806A52DD054FF9C784B2A0D4FBAAA597EA10A17358DEEFEB582ADDF72FD7A5A4DB88F71494BBAF4CBD0F10C60C85C9299F9157D847B747099F6049FC7531F7760BD91E88A6DB4717942C0509652EA3E2C7AF88E1205CBDFF1B6DF0F2A3F61F0000 , N'6.4.4')
END

IF @CurrentMigration < '202202101125400_PopulateGenresTable'
BEGIN
    INSERT INTO Genres VALUES (1,'Horror')
    INSERT INTO Genres VALUES (2,'Action')
    INSERT INTO Genres VALUES (3,'Comedy')
    INSERT [dbo].[__MigrationHistory]([MigrationId], [ContextKey], [Model], [ProductVersion])
    VALUES (N'202202101125400_PopulateGenresTable', N'CodeFirstExercisesVidzy.Migrations.Configuration',  0x1F8B0800000000000400DD59DB6EE336107D2FD07F10F4D416592B9797D6B07791759222E8260EE224E85B404B63872845A92415D85BF4CBFAD04FEA2F74A8BB48C996DDC0DB1601029B9C19CEE5702EF45F7FFC39FAB00A99F30A42D2888FDD93C1B1EB00F7A380F2E5D84DD4E2DDF7EE87F75F7F35BA0CC295F354D09D693AE4E472ECBE28150F3D4FFA2F10123908A92F22192DD4C08F428F0491777A7CFC837772E2018A705196E38CEE13AE6808E917FC3A89B80FB14A08BB890260325FC79D592AD5B92521C898F83076274871458554972B103E95209F68F079ED3AE78C125467066CE13A84F3481185CA0E1F25CC9488F87216E302610FEB18906E419884DC886145DED79EE3536D8F573116A2FC44AA28DC51E0C959EE20CF64DFCBCD6EE94074E125BA5AADB5D5A91BC7EE8FC0055A6E9E349C30A1A93A5D3C48198F9C8EEDA3121E8822FD87940953898031874409C28E9CBB64CEA8FF13AC1FA25F808F79C2585D57D416F71A0BB87427A218845ADFC322B7E03A701DAFC9E7998C255B8D2733EFE35AA1F9B7783699332891E06D64D7FF0B010827BC1EAE7343569F802FD5CBD8C58FAE73455710142BB9D4474EF136219312897DC82D79A5CBD4FBC671E85188A4EBDC034BB7E50B8D336C0FD2ADE73416487025A2F03E62054BBEFEFC40C412142A1CB56CCEA244F8863223AFC2C946F4A492F6414FCAF8DF47CF355767A72DF0A9B962A62201E86B10444170479402C1B50C489DF965A0661C82C00222E182A8F22CFDF981863DEE46276C0B54EE0BDB0299ADB02D30DD07B6E752463E4D75A8E3B638BF69CE250F9C4DCA6491288DC0682032698C58C493C7EE77967F3A049697B21298E7E28D02475ECD1AFB6E62F1548422D82A433FA78BB0522DF714CB617E55658E1453772D7406CA0869E5E7A6EA96E94DF6229159ECB92B0DF69AA5868C123A3592366899F77F4B704B7D2B55BD9E228A70D644143A9AE9A569560B7ECB2056AD8F97F53E458FE4753449A31B12C798236A4D53BEE2CCF28EE9DD6CF72E22CC6478BE6C69264A6DCB9330E3912518BBB55A80B985CC894E259320B4C81A90EDC0537154039576A40A9415E4FA73C6B2B1AB3125555EBC42C3424CDCA98D60C6DAE64B9B56C28868A92093882521EFAA429BB8B39A50E7CF566C0923CF50DCF4916739C900ABE9F25E01C92FCF5B0424CB0CBB07A483EF4B07A44B42A302D70535360E1FE066AE6A897299897B86B2A46F0D58EB35D229B7AD2336B2B7ED9B5E91CE44B5C55BFBA63C78479DF272B0A74EA9901D7532EB8A1D4EABBC98242598CA32639493519EDA7718CC8B5C9F91B80EEAFE8A8EC23C3F5B4B05E140130C66BFB209A308DF8AE08670BA00A9B2F6DEC5B1F8D418EBFF3D23B62765C0FACCD9071F5014E56BAADDFA0F265CFE4A84FF42C43721597D5B97648F163B0E8E077747EA8AAD13D9617CD56B0C0BF0B3DA3E86EDE6F7BDB1B82157DAC45D496C7BBCAA636A51B366976B1EC06AECFE96320D9DEB9F9F0BBE23672A30830C9D63E7F79DA359A96DDCA01E0A14BC3B28B0DFCCDA5AF3CCD164FBB07A6295DA29BF40102A70CEFD2C994E88F449607B4DD7A18DA7E713A1A9429F1957BF09C30284BE8F8461B9924A60C1B27A9B3B41B94F63C21A56DB35B74F16D12695F2CC9D0B8881EBF4601BD8E7B44D2D4629DA70EF360774BE036C014E5B63520B9D1DB5D680FDCF80D33F948705CEA63EF0CD81D3FE80640FED3D5E88BA1F88B23610EBDA5CA7A72C2B76BC93B43E1E75BF1DB5496E7FC46997DCA5787DB3F38C0E13B63E60952F4F9BDFB13A461C3BE15B03F0D6F7AB86D9E620D6FFE9AA97B1C51BD91663DB67273B4959CF2F87327687773A7B60C21B5AFBBD133384A4CB4A84FEF59383DFB89B25CD355F44459230342A488C66E60614C116929C0B4517C457B8ED8394E9AF084F8425487219CE21B8E6D344C5894293219CB3C6AF123AD56C3A3F7D8C6CEA3C9AC6E983FF5B98806A52DD054FF9C784B2A0D4FBAAA597EA10A17358DEEFEB582ADDF72FD7A5A4DB88F71494BBAF4CBD0F10C60C85C9299F9157D847B747099F6049FC7531F7760BD91E88A6DB4717942C0509652EA3E2C7AF88E1205CBDFF1B6DF0F2A3F61F0000 , N'6.4.4')
END

IF @CurrentMigration < '202202101145539_UpdateGenreColumnInVideosTable'
BEGIN
    IF object_id(N'[dbo].[FK_dbo.VideoGenres_dbo.Videos_Video_Id]', N'F') IS NOT NULL
        ALTER TABLE [dbo].[VideoGenres] DROP CONSTRAINT [FK_dbo.VideoGenres_dbo.Videos_Video_Id]
    IF object_id(N'[dbo].[FK_dbo.VideoGenres_dbo.Genres_Genre_Id]', N'F') IS NOT NULL
        ALTER TABLE [dbo].[VideoGenres] DROP CONSTRAINT [FK_dbo.VideoGenres_dbo.Genres_Genre_Id]
    IF EXISTS (SELECT name FROM sys.indexes WHERE name = N'IX_Video_Id' AND object_id = object_id(N'[dbo].[VideoGenres]', N'U'))
        DROP INDEX [IX_Video_Id] ON [dbo].[VideoGenres]
    IF EXISTS (SELECT name FROM sys.indexes WHERE name = N'IX_Genre_Id' AND object_id = object_id(N'[dbo].[VideoGenres]', N'U'))
        DROP INDEX [IX_Genre_Id] ON [dbo].[VideoGenres]
    ALTER TABLE [dbo].[Videos] ADD [Genre_Id] [tinyint] NOT NULL DEFAULT 0
    CREATE INDEX [IX_Genre_Id] ON [dbo].[Videos]([Genre_Id])
    ALTER TABLE [dbo].[Videos] ADD CONSTRAINT [FK_dbo.Videos_dbo.Genres_Genre_Id] FOREIGN KEY ([Genre_Id]) REFERENCES [dbo].[Genres] ([Id])
    DROP TABLE [dbo].[VideoGenres]
    INSERT [dbo].[__MigrationHistory]([MigrationId], [ContextKey], [Model], [ProductVersion])
    VALUES (N'202202101145539_UpdateGenreColumnInVideosTable', N'CodeFirstExercisesVidzy.Migrations.Configuration',  0x1F8B0800000000000400D559DB6EE336107D2FD07F10F4D416592B9797AD61EF22EB2485D1CD055112F42DA0A5B14394A254920AEC2DFA657DE827F5173AD45DA4E4C8EE6EB64580C021678673399CE171FEFEF3AFC9FB75C49C671092C67CEA1E8D0E5D0778108794AFA66EAA966FDEBAEFDF7DFBCDE43C8CD6CE432977A2E55093CBA9FBA45432F63C193C4144E428A2818865BC54A3208E3C12C6DEF1E1E18FDED1910768C2455B8E33B94DB9A211647FE09FB3980790A894B0CB3804268B75DCF133ABCE158940262480A93B43890B2AA43A5F8308A804F940C34F1BD7396594A03B3EB0A5EB10CE6345143A3BBE97E02B11F3959FE00261779B04506E4998842288712D3E349EC3631D8F572B96A68254AA38DAD1E0D1499120CF54DF2BCD6E95404CE139A65A6D74D4591AA7EE4FC005466E9E349E31A1A57A533CCA140F9C9EED830A1E8822FD83922953A98029875409C20E9C9B74C168F0336CEEE25F814F79CA58D357F416F75A0BB87423E20484DADCC2B288601EBA8ED7D6F34CC54AADA19387F761A330FC2B3C9B2C185448F0B6AAEBDFA50184135E0FD7B924EB8FC057EA69EAE247D7B9A06B08CB95C2EA3DA7789B504989D43EE48A3CD355967DE338CC28C4D2756E8165DBF2892639B647D9D66351C40B1147B7312B35F2E5C73B2256A0D0DDD8DEF3E35404862713AF06C956E86486F6814EA6F8FF87CE9CAB93E30EEC3452E1AB5800A61A045110DE10A540706D03B2647E1D9C198720AA80483823AA3A4B7FBEA3D1808BD18BD90292FB41B6846517644B380F81ECA994714033079A982D0E6F4772CE43678B27790D2AFFB10E88499A200AF1DCA9FB8395996E7BD565ACED159968DB3B1C8D8ECC181BD1D8F712A7A62214815607FA295B84B5EAB8A338078B6B2A0B9498DE6BA33EA86639B105D5796E7B6F05DF562F3B98A55E24D3506F446AD82871D390E8809579F3B7D7B672B6F6D31B66A1AC66C3429928B3ADB443EAC06E55C0FABDE3E50F9EF261E4F5BC8C26972449B037345E4AC58AE317CFA437FEEE4F8728B7E105B2E30551795B9D849D8EACC0D86DCC00EC296441740B99859125D6826B0F96CAA35A88B40B5522AC14D79F7395AD4F19D3529DC50B0C2CC2869DC50866AD6DBDECA54A18111D936316B334E27DD3679B763E0B9AFAF98A6D61E2198E9B39F2AC24196035533EA820C5DDF91C05C9BBC2EE05E9D1FBDA05E9B3D09ABC4D43AD8DD72F70BB577554B9ECC2032B598A0F2A976EB55DEFDF76CBB57332A8C2B98DAE3AEB9C54E7EEE6523147F674696767B04B86347BD2CCA57E9E554FB321819A83C8AEBF358F4C910A7DD55C32E6CFA498053BD0F77238E422AE83B13F63867130F81BA9201A698191FF1B9B318A78AF052E09A74B902AE7012E92E76383FCFF7788B82765C886B0F15767328AF20DD569FD173C983F13113C11F15D44D6DF372DD91C644786F9EAE9C852F122757B9D5C0DE26B217E5683F85A174B7BEC00824518E63C84F5D4FD3D531C3BF35F1E4BDD03E75AE04D1C3B87CE1FFBD57D3F9AD69841BB3129FB39BF0FBF43B081D058200C5BA554029BA535886F90B3073421ACE5B33D29862058E7AFB267EE9C41025C43B315D69083B68DC4CAAA71955E8A7D47AE6A73840164B49F8BE643046FC542173607630F2DEBE4A9FD34B5CB723765FC8214B6157D8387BC485A6DA6FB6568AA3DFE11318DEFF811AC92AE6A13FA45C3216861A59299F3655C82D6F0A814317ADA2528820D919C0A45972450B81D8094D997670F84A528721E2D209CF3EB5425A9C290215AB0D697711AFADBCECFB878DBE7C975927DD1F539424037A9EEE9D7FC434A5958F97D61F7F43E13FA4E15D34BD752E929B6DA5496AE623ED05091BEAA15DC4194303426AFB94F9E611FDFEE257C84150936E52BAEDFC8CB8568A77D7246C94A904816366A7DFD7F2B4FFFE3EADD3F71E7F3EBEA1A0000 , N'6.4.4')
END

IF @CurrentMigration < '202202101152473_AddClassificationColumnToVideosTable'
BEGIN
    ALTER TABLE [dbo].[Videos] ADD [Classification] [tinyint] NOT NULL DEFAULT 1
    INSERT [dbo].[__MigrationHistory]([MigrationId], [ContextKey], [Model], [ProductVersion])
    VALUES (N'202202101152473_AddClassificationColumnToVideosTable', N'CodeFirstExercisesVidzy.Migrations.Configuration',  0x1F8B0800000000000400D559DD6EDB3614BE1FB0771074B50DA96527375B60B768DDA4305627419416BB2B68E9D82146511A490576873DD92EF6487B851D4AD41F2539B297A61B0A1416C973787EBEF3C7FCFDE75FD357DB88390F20248DF9CC9D8CC6AE033C8843CA37333755EB173FBAAF5E7EFBCDF4228CB6CEC7E2DC993E87945CCEDC7BA59273CF93C13D44448E221A8858C66B350AE2C82361EC9D8EC73F79938907C8C2455E8E33BD4DB9A211641FF8398F7900894A095BC6213069D671C7CFB83A57240299900066EE1C4F5C5221D5C516444025C88F34FCBC739DD78C1214C707B6761DC279AC884261CF3F48F09588F9C64F7081B0BB5D02786E4D9804A3C479757CA83EE353AD8F571116AC8254AA383A90E1E4CC18C8B3C98F32B35B1A104D7881A6563BAD7566C699FB0EB840CDED9BCEE74CE853BD261E6584274ECFF649090F4491FE872753A65201330EA912849D3837E98AD1E067D8DDC5BF029FF194B1BAAC282DEE351670E946C40908B5BB85B5D16011BA8ED7A4F36CC292AC4693ABF766A750FD2BBC9BAC189448F0F692EBFF0B0608270C0FD75992ED7BE01B753F73F1A7EB5CD22D84C58AE1FA81538C262452226D5F72451EE826B3BE751D5A1462E93AB7C0B26D794F931CDBA36CEB9371E2A588A3DB981514F9F2A73B2236A050DCB8BDE7C7A9082C49A65E0592BDD0C9181D039D8CF0FF0F9D055767A71DD8A999C257B100343508A220BC214A81E09A0764C6FC3A38B32E41540191F096A8F22EFDFB8E468707C69C1129E99A06265D19D13552EDADC738F7468301FB71C15000BE2B188A4019160C69540B055BB985BC6464531596C363A4C9F1C98305211282603B84542D0F363DB0846805C268E853868D81EB7C242CC5CF49CB5F8DD3EF621696674FF79FBDD17E447396E7CFDA2EC88D5D5F7C2D651CD0CC38F57464BCDFBCEE8287CE1E28541835196D8916A409DA0C1D3F737F6889DFCDAFCCB3153F03C526BFF16834B135AC69D34EB9D81029427969B0CCF17A11B6AA035AD8E218744993006CE935531F543D9EB0BA54406F4ADF52BE495E14A716B931A6455ED3D4E251046EED44475CDB497DBF6F4B612B39BD611C0A6FD6381486B22B4653A58EE4513AB06A65BDBC972D7A5EAFA7E99D2E4992608CD69A60B3E2F8A6037EE11FDE1546390F2F901DCD61296D79131631B2016BB796BAB05C9015D1796E1E46AD630DB8F660A9B8AA81C8B6A30A8415C7F56F9380F775A936A7CA8A97A85884B538D3116C5FB7E9B2218430223A9A8279CCD288F73516FBA8F3325FA7CF57DA1CA69E25B86D23AF65240BACB6C90739C4C4CE533824CF0A873BA487EE6B3BA48F43A3A9AA336A6C0CE76737187596F6DEF3C3A699013BB053E4F681F8288E0F02814EE05D03533391B76D320837398F2EF4689B94F71E2692A94E478A74B030987B439A354A0BA9BBEEB22B1DA2A85DDEDAFE6F5539FB4889BEB2DA59556D6A2ACC01EF3D45C9C98FB80EEAFE8016C672E3EFA48268A40F8CFCDFD89C51C47B756049385D8354792FEC9E8E27A7D66BD17FE7E5C6933264439E6F9E7DF4C5861D4707F5AF1E4EF80311C13D11DF4564FB7D9D537B683DF049E2D9CD9199E2D159FF796C3568C00FF1B77ABA01FF58385449C7E2D31A6A1638AE6E67EEEF19E1B9B3F8E553417BE25C0B8CEB7367ECFC711C8A8E1B256B15EDB069AF3D721C3383227441686411868957E2A44FDB65FD46501ED084B086CCEDBA33241EB4FD4A7EF6CE5B48806BA037D41A72D1BE025B72B502F331DD0F9CA7DB73CC8081B97F5ECE4B12C6D84A3B360763CFE8D8394BF78FD25D9CBBC7DA2F386637B4AFCD4A8F0ED6ED69FCCB8CD2ED66021153FB13138255D24DC542F7471C820656CA330BBE8E0BD05A121547AC9CB6044530BD92D742D13509146E07803953BFDD9A07AE8B6805E1825FA72A4915AA0CD18A35DE8235F4F7DD9FBD1734659E5E27D96BE853A88062525D21AEF99B94D61EF22EDB39BD8F858E29530BB52F95AE899B5DC9E92AE6031919F395A9E00EA284213379CD7DF200C7C8F641C27BD8906057F484FD4C1E7744D3ECD3B7946C0489A4E151D1E32762388CB62FFF010A25C003691D0000 , N'6.4.4')
END

IF @CurrentMigration < '202203061531181_EnhanceVideosTable'
BEGIN
    ALTER TABLE dbo.Videos DROP CONSTRAINT DF__Videos__Classifi__403A8C7D
    IF object_id(N'[dbo].[FK_dbo.Videos_dbo.Genres_Genre_Id]', N'F') IS NOT NULL
        ALTER TABLE [dbo].[Videos] DROP CONSTRAINT [FK_dbo.Videos_dbo.Genres_Genre_Id]
    IF EXISTS (SELECT name FROM sys.indexes WHERE name = N'IX_Genre_Id' AND object_id = object_id(N'[dbo].[Videos]', N'U'))
        DROP INDEX [IX_Genre_Id] ON [dbo].[Videos]
    EXECUTE sp_rename @objname = N'dbo.Videos.Genre_Id', @newname = N'GenreId', @objtype = N'COLUMN'
    DECLARE @var0 nvarchar(128)
    SELECT @var0 = name
    FROM sys.default_constraints
    WHERE parent_object_id = object_id(N'dbo.Videos')
    AND col_name(parent_object_id, parent_column_id) = 'Name';
    IF @var0 IS NOT NULL
        EXECUTE('ALTER TABLE [dbo].[Videos] DROP CONSTRAINT [' + @var0 + ']')
    ALTER TABLE [dbo].[Videos] ALTER COLUMN [Name] [nvarchar](255) NOT NULL
    DECLARE @var1 nvarchar(128)
    SELECT @var1 = name
    FROM sys.default_constraints
    WHERE parent_object_id = object_id(N'dbo.Videos')
    AND col_name(parent_object_id, parent_column_id) = 'GenreId';
    IF @var1 IS NOT NULL
        EXECUTE('ALTER TABLE [dbo].[Videos] DROP CONSTRAINT [' + @var1 + ']')
    ALTER TABLE [dbo].[Videos] ALTER COLUMN [GenreId] [tinyint] NOT NULL
    CREATE INDEX [IX_GenreId] ON [dbo].[Videos]([GenreId])
    ALTER TABLE [dbo].[Videos] ADD CONSTRAINT [FK_dbo.Videos_dbo.Genres_GenreId] FOREIGN KEY ([GenreId]) REFERENCES [dbo].[Genres] ([Id]) ON DELETE CASCADE
    INSERT [dbo].[__MigrationHistory]([MigrationId], [ContextKey], [Model], [ProductVersion])
    VALUES (N'202203061531181_EnhanceVideosTable', N'CodeFirstExercisesVidzy.Migrations.Configuration',  0x1F8B0800000000000400D5595F6FDB36107F1FB0EF20E8691B522B7650600BEC16A9930CC1EA2488D3626F052D9D1D6214A59154606FD827DBC33ED2BEC28E12254BA4E4C86E9A6D0810D8E4DD9177F7BB7FF4DF7FFE357EBB8E99F70842D2844FFCE1E0D8F780874944F96AE2676AF9EA7BFFED9BAFBF1A5F44F1DAFB58D29D683AE4E472E23F28959E06810C1F20267210D350243259AA4198C401899260747CFC43301C0680227C94E579E3BB8C2B1A43FE05BF4E131E42AA32C26649044C9A75DC99E752BD6B12834C4908137F8A1497544875B106115209F2238D7EDBF8DE19A304AF3307B6F43DC279A288C2CB9E7E90305722E1AB798A0B84DD6F5240BA2561128C12A75BF2BEFA1C8FB43EC196B11415665225F19E028727C64081CD7E9099FDCA8068C20B34B5DA68AD73334EFC1F810BD4DC3EE974CA84A6EA34F120673CF23AB68F2A78208AF41F52664C6502261C3225083BF26EB305A3E14FB0B94F7E013EE11963F5BBE26D71AFB1804BB7224941A8CD1D2C8D065791EF054DBEC066ACD86A3C857AEF360AD5BFC6B3C9824185846027BBFE5F0A40386178F8DE8CACDF035FA987898F1F7DEF92AE212A578CD40F9C6234219312997BC83579A4ABDCFAD671685148A4EFDD01CBB7E5034D0B6C0FF2AD4FC689972289EF12567214CB9FEE895881C2EB26EEDE3CC94468DD641C6C41B2133AB9A043A09333FEFFA173C5D5C9A8053B3553CC5522004D0D8228886E895220B89601B9313F1367A3D7AF7BE16C4F7423CC80483827AA3A5C7FBEA7F1FEB2A68C4849973434F9CBE8A2A16B6F3D25B9333C0CFA0F8B8E3202DAA2A38C9C7ED191C5B5D8B095BB92978CACB69566FFA0694A7CF6E841CC4420D80631564B8C4D0FCC205E80301ACE29C34EC1F73E1296E1D7A1E3AF06F58F098B2ADAD16EDA5BED473467457FE2BAA030767DF14CCA24A4B971EAF9C978BF79DC058FBC1D50D862D4A4B8195A90A6683374FCC4FFCEB97EBBBC2AF16EE5192836E50D7D3B53DDF0738C4105DE5958740D53224312B9318196881A96A959C1CDDDD85929427965E81C307A11D6AA0592D82B19544A93496CADB5D039A87A1C6299DA0648536BC7684DF6B2CA39ECC609167B4D534B4619F0358A967C60DB7C3726AACB6EEF19F49350A2A026A13494EDCCA64A2D49A772E0B6270E8AA6B86C9E838EEE793C23698AB15DEBA6CD8A3737ADF4ABF9FEED655CC80842D9D26556B7AD4EC26A485660EDD6521E9619B2203A3F4EA3D8216BC0B5034BE5510D44BA8E2A115692EBCF2671EF6A776D495B2B5EA2623116F55C47B07DEDF2E5D30C6144B47417D3846531EFEA50767117FD429DBF5871258C03EBE2B68D02C7484EE6699ABC97434CEC3C87438AACB0BF433AF8FE6D87744968346375418D8DFEF2ECC6A42ED2DE7B79D83433600B76CADCDE131F25792F10E804DE36793513B96B935EB8C965B48127AFE125F37E3732C5E9C01BED7719BB3AB9EE738A944D5281A72A5656511A9B02B1C7BB4F59310A12DFC3BB3FA285B05ACC3752413CD00483F9AF6CCA28C2754B30239C2E41AAA205F647C7C391F56AF4DF79C109A48C589F679C171F81B14FC789417DD6030A7F24227C20E29B98ACBFAD4B721F49F67C9A787173E4A67872E67F065BB9CF009F3FE347F8593DDF8C7F2834AA44698971C6932B1C58D713FFF79CEFD4BBFAF993613DF26E0446F8A977ECFDF1C4F15D803A6C98ACD5A69799F7DCA1E390E915D10F42839330CCDD5209CCDE4E61BF1594873425ACA1AB5B7AFA849456A49267EF9C430A5CC74A43AD3E07ED28B19550CB9C4FA9BEE740ED0E323D26E6EE81B9286A18990BEDD702C41DB363EB30DD3D4BB7496E9F6BBFE09CDDD0BE362C3D3959BBE3F89799A5DD76041153FBB10AB12AE96A2B42FF74C5216C60A5A2B9E2CBA4C4AC75A392C4CA84335004933239138A2E49A8703B04CCB4FA15D8BC8C5DC40B88AEF84DA6D24CA1CA102F58E35559437FD7F9F98341F3CEE39B347F467D0E15F09A54D7951BFE2EA3B517C0CB9654DC2142C794A9A6DA974A57D5D5A692749DF09E828CF9AA54700F71CA5098BCE173F20887DCED8384F7B022E1A6EC2ABB853CED88A6D9C7E794AC0489A591B1E5C7AF88E1285EBFF907A771333AB31D0000 , N'6.2.0-61023')
END

IF @CurrentMigration < '202203061533426_EnhanceGenresTable'
BEGIN
    DECLARE @var2 nvarchar(128)
    SELECT @var2 = name
    FROM sys.default_constraints
    WHERE parent_object_id = object_id(N'dbo.Genres')
    AND col_name(parent_object_id, parent_column_id) = 'Name';
    IF @var2 IS NOT NULL
        EXECUTE('ALTER TABLE [dbo].[Genres] DROP CONSTRAINT [' + @var2 + ']')
    ALTER TABLE [dbo].[Genres] ALTER COLUMN [Name] [nvarchar](255) NOT NULL
    INSERT [dbo].[__MigrationHistory]([MigrationId], [ContextKey], [Model], [ProductVersion])
    VALUES (N'202203061533426_EnhanceGenresTable', N'CodeFirstExercisesVidzy.Migrations.Configuration',  0x1F8B0800000000000400D559CD6EE33610BE17E83B083A16592B76B0401BD8BBC83AC9C2E83A09A224E86D414B63872845A92415D85BF4C97AE823F5153A94A83F4A7664379B6E1120B0C9992167E69B3FFAEF3FFF1ABF5F47CC79022169CC27EE7070EC3AC08338A47C357153B57CF3A3FBFEDDF7DF8D2FC268ED3C1474279A0E39B99CB88F4A25A79E27834788881C443410B18C976A10C49147C2D81B1D1FFFE40D871EA008176539CEF836E58A46907DC1AFD3980790A894B0791C0293661D77FC4CAA73452290090960E24E91E2920AA92ED620022A413ED0F0CBC675CE1825781D1FD8D27508E7B1220A2F7B7A2FC15722E62B3FC105C2EE360920DD9230094689D38ABCAF3EC723AD8F573116A28254AA38DA53E0F0C418C8B3D90F32B35B1A104D7881A6561BAD7566C689FB11B840CDED934EA74C68AAAD261E648C47CE96EDA3121E8822FD87942953A98009875409C28E9C9B74C168F0336CEEE25F814F78CA58FDAE785BDC6B2CE0D28D8813106A730B4BA3C12C741DAFC9E7D98C255B8D2757EFC346A1FA57783659302891E0ED64D7FF0B0108270C0FD79993F527E02BF53871476FDFBACE255D4358AC18A9F79C6234219312698F53AFC8135D65EEB0CE4713432C5DE71658B62D1F6992837D906D7D365EBD1471741BB382235FFE7C47C40A14DE3F6EEFF9712A02EB2663AF42CD4E2C65820EC152C6F8FFC7D28CAB9351875B6BA6F0552C004D0D8228086F885220B896019931BF11E059A722CC80483827AA3C5C7FBEA3D1FEB2A68C484997343009CDE8A2A16B6F1D1C1E06FD87454711015DD151444EBFE848A35A6CD8CACDE42523ABAAF4EC1F344D892F1E3D88991004DB20C66A99B2E98139440B1046439F326C1D5CE781B014BF0E5BFE6A507F8C5958D28E76D3DE683FA2394BFA93B60B7263D717CFA48C039A19A79E9F8CF79BC75DF0D0D901850AA326C5CDD18234419BA1E327EE0FADEB77CB2B136F25CF40B1296FE8DA99EA9A9F630C2A70CE82BC8D98121990B01D136889B061999A15DAB91B5B2D45282F0D9D01462FC25A7540129B27834A693289ADB516EA83AAC72196A92A409A5AB78CD6642FAA5C8BDD38C162AF696AC92802BE46D1910F6C9BEFC64479D9EA9E5E3F09050A6A120A43D9CE6CAAD491744A07564DB29777C94537ED6D69A7C773922418DBB5F6DAAC38BEE9ADDFF8FBF79B512EC30B6447DB59DEB63C09AB215981B55B4B795866C882E8FC380DA3165903AE5BB0541CD54064DB5105C20A72FDD924EE5DFDAF2DA9B2E2252A166151CF7404DBD76DBE6CBC218C888EEE621AB334E2DB3A945DDC79BF50E7CF57DA12C69E7571DB465ECB48ADCCD334792F8798D8790987E459617F876CE1FBAF1DB24D42A319AB0B6A6CF4976737267591F6DEEBC3A699013BB053E4F69EF828C87B814027F0AEC9AB99C8DB36E9859B4C461778B21A5E30EF7723539C0EBCD17E97B1AB53DB7DAD22659394E0298B955594C6A640ECF11054548C9CC475F0EE4F6821AC16FE462A88069A60E0FFC6A68C225C2B8239E1740952E52DB03B3A1E8EAC67A46FE749C79332647DDE755E7D04C63E1D2706F5AF5E54F81311C12311EDD176A7D03D9F295EDD3499599E9DFF5FDF6EBDE6FD103FAB979BF70F854999342D31AD516586C3EB7AE2FE9EF19D3AB35F3E1BD623E75A60B49F3AC7CE1F0702EAB0C1B256A75E67F66B0F20874CB2887E101A9C84611E974A60266F15F91B41794013C21ABAB6CB509F90D28A94F2EC9D734880EB5869A8D5E7A01DE5B6146A99F339D5F71CAEDB434D8FE979FBF09C17388CCC85F66B0EE22D7364E760BD7DAEEE92DC3DE37EC599BBA17D6D707A76CA6E8FE65F67AE6EB7268898DA2F59885549579508FDBB1687A081959266C697718159EB4605899509E7A00826657226145D9240E176009869F58BB07925BB881610CEF875AA9254A1CA102D58E38559437FD7F9D9E341F3CEE3EB247B527D0915F09A54D7956BFE21A5B5D7C0CB8E54BC45848E29534DB52F95AEAAAB4D29E92AE63D0519F395A9E00EA284A13079CD7DF20487DCED5EC227589160537498DB853CEF88A6D9C7E794AC0489A49151F1E357C47018ADDFFD03641C815ED01D0000 , N'6.2.0-61023')
END

IF @CurrentMigration < '202203061555165_AddTagsTable'
BEGIN
    CREATE TABLE [dbo].[Tags] (
        [Id] [int] NOT NULL IDENTITY,
        [Name] [nvarchar](max),
        CONSTRAINT [PK_dbo.Tags] PRIMARY KEY ([Id])
    )
    CREATE TABLE [dbo].[VideoTags] (
        [VideoId] [int] NOT NULL,
        [TagId] [int] NOT NULL,
        CONSTRAINT [PK_dbo.VideoTags] PRIMARY KEY ([VideoId], [TagId])
    )
    CREATE INDEX [IX_VideoId] ON [dbo].[VideoTags]([VideoId])
    CREATE INDEX [IX_TagId] ON [dbo].[VideoTags]([TagId])
    ALTER TABLE [dbo].[VideoTags] ADD CONSTRAINT [FK_dbo.VideoTags_dbo.Videos_VideoId] FOREIGN KEY ([VideoId]) REFERENCES [dbo].[Videos] ([Id]) ON DELETE CASCADE
    ALTER TABLE [dbo].[VideoTags] ADD CONSTRAINT [FK_dbo.VideoTags_dbo.Tags_TagId] FOREIGN KEY ([TagId]) REFERENCES [dbo].[Tags] ([Id]) ON DELETE CASCADE
    INSERT [dbo].[__MigrationHistory]([MigrationId], [ContextKey], [Model], [ProductVersion])
    VALUES (N'202203061555165_AddTagsTable', N'CodeFirstExercisesVidzy.Migrations.Configuration',  0x1F8B0800000000000400ED5ADB6EDC36107D2FD07F10F4D4168E653B08D01ABB099CB51D188D2FF03A41DF025AE2AE8952942A52C66E8B7E591FFA49FD850E254A2B5EA495948D93064580C04B72867339430E67F4CF5F7F4F5EAD62EA3DE28C93844DFDC3FD03DFC32C4C22C296533F178B673FFAAF5E7EFBCDE42C8A57DEFB6ADD73B90E28199FFA0F42A4C741C0C3071C23BE1F93304B78B210FB611207284A82A383839F82C3C300030B1F7879DEE4366782C4B8F8013F67090B712A72442F930853AEC661665E70F5AE508C798A423CF567B0E29C645C9CAD7016128EF97B12FDBEF6BD134A108833C774E17B88B1442001C21EBFE3782EB2842DE7290C207AB74E31AC5B20CAB152E278B3BCAF3E0747529F604358B10A732E927820C3C3E7CA4081493ECACC7E6D4030E119985AACA5D68519A7FE1BCC32D0DCDCE9784633B9AAD5C4FB05E19ED732BD57C3035024FFC1CA9C8A3CC35386739121BAE7DDE4F794843FE3F55DF22B66539653DA9415A485396D00866EB224C59958DFE285D2E022F2BD40A70B4CC29AAC4153AAF77A2D40FD2BD81BDD535C2321E82497FF570C004E101EBE7789566F315B8A87A97FF4E285EF9D93158EAA11C5F51D23104D4024B2BCC7AE57E8912C0B7718FB838971C27DEF16D3629A3F90B404FB7E31F54179F53C4BE2DB845614E5F0873B942DB100F9137B6E9EE4596848320936A8E9C452C1680C960AC2FF3E962E98787EE4706BC314739164184C8D332470748384C019933C7061CC2F0478C6AE00338C383E45A2DE5CFE7D47E2E1BC6614714E162454079AD24542D79C1A1D1E0AFDE3A2A38A0057745491D357903BB4EC8AD272DA14438EB648514CB984E81DA2C0614C8002D9FFE1F9D1E1097FF60ACF9D5D031D00735F021AF6FA012C8F1BF03243F8829F5360592B3A1C793AC79D83104C1FE18CAEC1558D7C40B7FF258EEF71A6349C130A09B2EFBD4734879F8796B7B4D56F121AD56B8FBAD7DE48278239EBF5CF6D1794C66E0E9E709E84A4304E1315EA8CD3B73B6391D771E06D4E6275915F8205490A3603C74FFD1F2CF1DDFC6A646DF8A90357E777E89B017FCD4EE1A611D83B09CB6479867888223B22C0129166998615FA18A7888B6E5DF453F8A34DA3C7DC865D711E77326B55AE0C48782D0944588DA2221AE4205E0947BCC1FB47851C57A78D29B7643AC7A27995C219B2897EDDA596DA3A79754259E4CA8C5BC8CBF3CB222E8C6690368C646C5F5DF78D158E6CC0C46277ACD4826E540CFA71A830D0E050D9D804B9AE526F754BA3B5696B437F1BF8C7E8AAC1BDC1A094ADB7A2D5AD53837C530B08CA62405534085AAA06934B94A670B837AA086AC49BAB12C2B3F9F067755CF20842EE785DD7D2D63B41568196D8986DDC79904DA37B242FC859145BCBB4906E09986A2B2D6A6D2F5581542D977FAB9BBBEB996F72DA58F11C148B21392A74C426A86DBAA28A8328CA1C59DA2CA179CCDA32BD2EEA32EF6AD2972336874960086EDA28B08C645D3DBAC97B394405CE2E1C529E9CC31DD242F7B91DD2C6417B7336196913FDF999996993A539F7C5C0A6E5B01E0E1A79630E878C93EA7303E653BB42BF8C1C615CE5133D43B55ADE2B1EE545EA7AE4E9C9836D935E1E2978B8DC52E4D315F1308954923052A261C29889C248F79539485FEF95AB9DCE738447ABB59A19D54863158C76E6BE668636522060B16B075A099FB9A48EFE3AF13312BC894AB606F48EAAECAB5CE27B20FB23D80832AFF99A0B1CEFCB05FBF3DFE88C12386F360B2E11230BCC45594FF08F0E0E8F8CCED397D3050A388F689F56D09397E504616B22CDFA114D18F688B2F001657635BC93E9C0CEC6939BA630CBD69AE4D3DBAD578B2082BFC5EE5A04636152DF7A061BAB3472C122BC9AFA7F1474C7DEC52F1F14E99E779D41B41F7B07DE9FBB029475777C5570FA2E46ABEF9B9CECBAF6B0D01B69AEF62BD35EEBBCCDB65BB7DEA261E21ED0526403A0656FAD241EB67141B403448FAB3B3752E7A7290DDBB5A931D55C4009CE647C200A99091719E426D6BBE326232C2429A29AAE766ED527AAA522353F73E614A798C970D5D4EAB351C70BA0666A98739BEAA36AEFCE4C78B8A33E254C8A1AB329C0F66AFD58B0F4F7E12EC0E22E070C393F9F182FAE874AC363A6B31C7EFA8AB0D2D77B4F8994D6B7E0CE71E26E7BD9A5F496029BFE89485B5BAB7C0A420E7B2F8FA1F2726C69D3385B5EED1D2F1767775BC5D50D6B6B86B9B83A7B2D4E69DD8C3753AD323BB7F8749D38CD698D2EC3D67E94DDC4DA69B7AD6E957535DD5AAA3FC3456D397F5CD5A99D2A59B5F33A95745794CCA3DAA8313F8582035A897605098EABC637CA705272B2DCB0905F2C331C6A0755BDE6822D92EAB83424AA961869FD251608DECEE8241364814201D3218607B1FC98487D197216DFE3E8825DE722CD05A88CE37BAA7D9C24CFDDAEFD8B7EA92EF3E43A2DBE21DA850A202691CFFF6BF63A278D2F60CE1DEF8B1616F24057AF54E94B215FABCB75CDE92A613D1929F3D5F7D01D8E530ACCF8359BA3473C46B6771CBFC54B14AEAB42603B93ED8ED0CD3E39256899A1982B1E1B7AF809188EE2D5CB7F01ECE5EC8FAA2F0000 , N'6.2.0-61023')
END

